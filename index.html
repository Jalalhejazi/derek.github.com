<html>
	<body>
		<h1>Derek Gathright</h1>
		
		<h2>Connect</h2>
		<ul>
			<li><a href="http://derek.io/">derek.io</a></li>
			<li><a href="http://twitter.com/derek">twitter.com/derek</a></li>
			<li><a href="http://github.com/drgath">github.com/derek</li>
			<li><a href="mailto://drgath@gmail.com">drgath@gmail.com</a></li>
		</ul>
		
		<h2>Talks</h2>
		<ul>
            <li>"Select * From Internet: Yahoo Query Language" (Oct 12th, 2010 @ SoCal.js meetup in Pasadena, CA) - <a href="talks/20101011_SoCaljs/index.html">HTML slides</a></li>
            <li>"Select * From Internet: Yahoo Query Language" (May 5th, 2010 @ Music Hackday in San Francisco) - <a href="talks/20100515_MusicHackday/index.html">HTML slides</a></li>
            <li>"Select * From Internet: Yahoo Query Language" (Apr 21st, 2010 @ Yahoo! Center in Santa Monica, CA) - <a href="http://www.slideshare.net/drgath/yahoo-query-language-select-from-internet">Slideshare.net</a></li>            
            <li>"jQuery: JavaScript that Doesn't Suck" (Aug 8th, 2009 @ preDevCamp: Kansas City) - <a href="http://www.derekgathright.com/talks/20090808_pdc_jquery.pdf">PDF</a></li>
		</ul>
        
        <h2>Github Repositories</h2>
        <ul id="repositories"></ul>
        
        <h2>jsFiddles</h2>
        <ul id="fiddles"></ul>
		
		<script>
		
		
		
		function executeYQL(yql, callbackFuncName) {
			timerStart = +new Date();
			var url = "http://query.yahooapis.com/v1/public/yql?q=" + encodeURIComponent(yql) + "&env=store://datatables.org/alltableswithkeys&format=json&callback="+callbackFuncName + "&cacheBuster=" + (+new Date());
			var head = document.getElementsByTagName('head')[0];
			var script = document.createElement('script');
			script.type = 'text/javascript';
			script.src = url;
			head.appendChild(script);
		}
		
		executeYQL("select repository from github.user.repos where id='derek' | reverse()", "repositoryCallback");
		executeYQL('select * from html where url="http://jsfiddle.net/user/derek/fiddles/" and xpath="/html/body/div[3]/div/ul/li/div"', "fiddleCallback");
		
		function repositoryCallback(data) {
			var repositories = data.query.results.repositories,
			    html = [];
			
			for(i in repositories) { 
				var repo = repositories[i].repository;
				html.push("<li><a href='" + repo.url + "'>" + repo.name + "</a> - " + repo.description + "</li>");
			}
			
			document.getElementById("repositories").innerHTML = html.join('');
		}
		
        function fiddleCallback(response) {
            var fiddles = response.query.results.div,
                html = [];
            for (var i = 0; i < fiddles.length; i++) {
                var parsed = response.query.results.div[i];
                console.log(parsed);
                var fiddle = {
                    url: "http://jsfiddle.net" + parsed.a.href,
                    title: parsed.a.title,
                    description: parsed.div.p,
                    dateCreated: parsed.span.content.split(",")[1].trim()
                }
                html.push("<li><a href='" + fiddle.url + "'>" + fiddle.title + "</a> - " + fiddle.description + " (" + fiddle.dateCreated + ")</li>");
            }
            document.getElementById("fiddles").innerHTML = html.join('');
        }
		
		</script>
	</body>
<html>